{"ts":1372536790207,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1372536791797,"patch":[[{"diffs":[[1,"\"use strict\";\nvar express = require(\"express\"),\n    app = express(),\n    server = require('http').createServer(app);\napp.configure(function() {\n    app.use(express.static(__dirname + '/public'));\n});\nserver.listen(process.env.PORT, process.env.IP);\n\n//start moongoose\nvar mongoose = require('mongoose');\n//connect to import mongo database\nmongoose.connect(process.env.IP + \"/import\");\nvar db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'mongodb connection error:'));\ndb.once('open', function callback() {\n    console.log(\"mongodb connected to : \" + process.env.IP + \"/import\");\n    //Mongoose schema\n    var patientSchema = mongoose.Schema({\n        dob: String,\n        fname: String,\n        lname: String,\n        sex: Number,\n        address: String,\n        address2: String,\n        zip: Number,\n        city: String,\n        phone: String\n    });\n    // Mongoose model\n    var patientModel = mongoose.model('patient', patientSchema);\n    // DB queries and result\n    app.get('/search', function(req, res) {\n//respond to a queri : /search?qdob=<dob>\n        var varQdob = req.query.qdob;\n        \n// find the patients matching dob\n        patientModel.find({\n            dob: varQdob\n        }, function(err, schrpatient) {\n            if (err) console.log(\"dob query error\");\n//addresult to object result for mustache templating\n            var varResult = {\n                result: schrpatient\n            };\n            //send result as json\n            res.json(varResult);\n            \n\n        });\n    });\n});\n// routeur\napp.get('/', function(req, res) {\n    res.redirect(\"../search.html\");\n});\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1631}]],"length":1631,"saved":false}
{"contributors":[],"silentsave":false,"ts":1372545336962,"patch":[[{"diffs":[[1,"// Copyright 2013 Thibaut CONSTANT\n// This file is part of MEDIASSISTANT.\n// \n//     Mediassistant is free software: you can redistribute it and/or modify\n//     it under the terms of the GNU General Public License as published by\n//     the Free Software Foundation, either version 3 of the License, or\n//     (at your option) any later version.\n// \n//     Mediassistant is distributed in the hope that it will be useful,\n//     but WITHOUT ANY WARRANTY; without even the implied warranty of\n//     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//     GNU General Public License for more details.\n// \n//     You should have received a copy of the GNU General Public License\n//     along with Mediassistant.  If not, see <http://www.gnu.org/licenses/>.\n// \n"],[0,"\"use str"]],"start1":0,"start2":0,"length1":8,"length2":781},{"diffs":[[0,"ect("],[-1,"process.env.IP + \"/import"],[1,"\"mongo dharma.mongohq.com:10028/app16615432"],[0,"\");\n"]],"start1":1125,"start2":1125,"length1":33,"length2":51},{"diffs":[[0,"\" + "],[-1,"process.env.IP + \"/import"],[1,"\"mongo dharma.mongohq.com:10028/app16615432"],[0,"\");\n"]],"start1":1358,"start2":1358,"length1":33,"length2":51}]],"length":2440,"saved":false}
{"ts":1372545498804,"patch":[[{"diffs":[[0,"nnect(\"mongo"],[-1," "],[1,"db://moongoose:moongoose123456789@"],[0,"dharma.mongo"]],"start1":1123,"start2":1123,"length1":25,"length2":58}]],"length":2473,"saved":false}
{"ts":1372545786392,"patch":[[{"diffs":[[0,"b://"],[-1,"moongoose:moongoose123456789@dharma.mongohq.com:10028/app16615432"],[1,"\"+process.env.IP + \"/import"],[0,"\");\n"]],"start1":1136,"start2":1136,"length1":73,"length2":35},{"diffs":[[0,"\" + "],[-1,"\"mongo dharma.mongohq.com:10028/app16615432"],[1,"process.env.IP + \"/import"],[0,"\");\n"]],"start1":1353,"start2":1353,"length1":51,"length2":33}]],"length":2417,"saved":false}
{"ts":1372545890740,"patch":[[{"diffs":[[0,"b://"],[-1,"\"+process.env.IP + \"/import"],[1,"test:test@dharma.mongohq.com:10028/app16615432"],[0,"\");\n"]],"start1":1136,"start2":1136,"length1":35,"length2":54}]],"length":2436,"saved":false}
{"ts":1372545936676,"patch":[[{"diffs":[[0,"\" + "],[-1,"process.env.IP + \"/import"],[1,"\"mongodb://dharma.mongohq.com:10028/app16615432"],[0,"\");\n"]],"start1":1372,"start2":1372,"length1":33,"length2":55}]],"length":2458,"saved":false}
